{% extends "base.html" %}
{% load crispy_forms_filters %}

{% block title %}
  <title>Каталог товарів | Defender</title>
{% endblock %}

{% block content %}
  <form class="form-inline m-0" method="get" action="">
    {{ search_form|crispy }}
    <input 
      class="btn btn-primary mr-1 ml-1" 
      type="submit" 
      value="Пошук" 
      autocomplete="off-word"
    >
    <a class="btn btn-secondary" href="{% url 'catalog:product-list' %}">
      Очистити
    </a>
  </form>

  {% if object_list %}
    <div class="product-grid-list">
      {% for product in object_list %}
        <div class="product-card-list {% if not product.available %}unavailable{% endif %}">
          <a href="{{ product.get_absolute_url }}">
            <img class="product-image-list mb-2" alt="{{ product.name }}"
              {% if product.main_image %}
                src="{{ product.main_image.image.url }}"
              {% else %}
                src="{{ product.images.first.image.url }}"
              {% endif %}
            >
          </a>
          {{ product.name }}
          {% block update_wishlist %}
            {% include "includes/update_wishlist.html" %}
          {% endblock %}
          <p class="font-size-09 text-color-grey">
            Код товару: {{ product.product_number }}
          </p>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <br>
    <p class="text-color-grey">Немає товарів</p>
  {% endif %}
{% endblock %}
